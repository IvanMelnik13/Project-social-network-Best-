"use strict";(self.webpackChunkbest=self.webpackChunkbest||[]).push([[967],{6967:function(e,o,s){s.r(o),s.d(o,{default:function(){return b}});var r=s(9439),t=s(2791),i=s(184),l=function(e){var o=e.status,s=e.saveStatus,l=e.isOwner,n=(0,t.useState)(!1),a=(0,r.Z)(n,2),c=a[0],u=a[1],d=(0,t.useState)(null!==o&&void 0!==o?o:""),f=(0,r.Z)(d,2),x=f[0],v=f[1];(0,t.useEffect)((function(){v(null!==o&&void 0!==o?o:"")}),[o]);return(0,i.jsxs)("div",{children:[!c&&(0,i.jsx)("div",{className:"border-b min-w-[100px] text-start cursor-pointer",onDoubleClick:function(){l&&u(!0)},children:o||"..."}),c&&(0,i.jsx)("input",{className:"border",autoFocus:!0,onBlur:function(){u(!1),s(x)},value:x,onChange:function(e){v(e.currentTarget.value)}})]})},n=s(4657),a=function(e){var o,s=e.profile,r=e.isOwner,l=e.savePhoto,a=(0,t.useRef)();return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"max-w-[200px] mb-1 border-2 border-red-700 rounded-[50%] overflow-hidden",children:(0,i.jsx)("img",{src:(null===s||void 0===s||null===(o=s.photos)||void 0===o?void 0:o.large)||n,alt:"avatar"})}),r&&(0,i.jsx)("input",{type:"file",ref:a,onChange:function(e){var o=e.target.files[0];l(o),a.current.value=null}})]})},c=function(e){var o=e.profile;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:null===o||void 0===o?void 0:o.fullName}),(0,i.jsxs)("div",{children:["About me: ",null===o||void 0===o?void 0:o.aboutMe]}),(null===o||void 0===o?void 0:o.lookingForAJob)&&(0,i.jsxs)("div",{children:["lookingForAJob: ",null!==o&&void 0!==o&&o.lookingForAJob?"yes":"no"]}),(null===o||void 0===o?void 0:o.lookingForAJobDescription)&&(0,i.jsxs)("div",{children:["lookingForAJobDescription: ",null===o||void 0===o?void 0:o.lookingForAJobDescription]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"mb-1 text-start",children:"Contacts:"}),(0,i.jsx)("ul",{className:"flex flex-col gap-1 items-start",children:o&&Object.keys(o.contacts).map((function(e){return(0,i.jsxs)("li",{className:"pl-3",children:[e,": ",o.contacts[e]]},e)}))})]})]})},u=s(1413),d=s(9195),f=function(e){var o=e.profile,s=e.saveProfile,r=e.serverErrors,l=(0,d.cI)({defaultValues:{fullName:o.fullName,aboutMe:o.aboutMe,lookingForAJob:o.lookingForAJob,lookingForAJobDescription:o.lookingForAJobDescription,contacts:o.contacts}}),n=l.register,a=l.handleSubmit,c=l.setError,f=l.formState.errors,x=l.clearErrors;(0,t.useEffect)((function(){r&&c("_form",{type:"server side",message:r[0]})}),[r]);return(0,i.jsxs)("form",{className:"flex flex-col items-start gap-2 w-full",onSubmit:a((function(e){s(e,o.userId)})),children:[f._form&&(0,i.jsxs)("div",{className:"text-red-700",children:["Error: ",f._form.message]}),(0,i.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,i.jsx)("label",{children:"Full name:"}),(0,i.jsx)("input",(0,u.Z)({className:"border-b-2 flex-auto",placeholder:"full name"},n("fullName")))]}),(0,i.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,i.jsx)("label",{children:"About me:"}),(0,i.jsx)("input",(0,u.Z)({className:"border-b-2 flex-auto",placeholder:"about me"},n("aboutMe")))]}),(0,i.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,i.jsx)("label",{children:"Looking for a job:"}),(0,i.jsx)("input",(0,u.Z)({type:"checkbox"},n("lookingForAJob")))]}),(0,i.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,i.jsx)("label",{children:"Looking for a job description:"}),(0,i.jsx)("input",(0,u.Z)({className:"border-b-2 flex-auto",placeholder:"looking for a job description"},n("lookingForAJobDescription")))]}),o&&Object.keys(o.contacts).map((function(e){return(0,i.jsxs)("div",{className:"flex gap-3 w-full pl-3",children:[(0,i.jsxs)("label",{children:[e,":"]}),(0,i.jsx)("input",(0,u.Z)({className:"border-b-2 flex-auto",placeholder:e},n("contacts.".concat(e))))]},e)})),(0,i.jsx)("button",{onClick:function(){return x("_form")},className:"border-2 py-1 px-5 rounded-[10px]",type:"submit",children:"Submit"})]})},x=function(e){var o=e.profile,s=e.isOwner,r=e.saveProfile,t=e.status,n=e.saveStatus,u=e.savePhoto,d=(e.isFetching,e.setEditMode),x=e.editMode,v=e.errors,p=e.setFormError;return o?(0,i.jsxs)("div",{className:"items-start text-start flex flex-col p-4 gap-3",children:[(0,i.jsx)(a,{profile:o,isOwner:s,savePhoto:u}),(0,i.jsx)(l,{status:t,saveStatus:n,isOwner:s}),!x&&(0,i.jsx)(c,{profile:o}),x&&(0,i.jsx)(f,{serverErrors:v,saveProfile:r,profile:o}),s&&(0,i.jsx)("button",{className:"underline",onClick:function(){d(!x),p(null)},children:x?"Cansel edit":"Edit"})]}):(0,i.jsx)("div",{className:"p-4 text-start",children:"Profile not found..."})},v=s(3531),p=s(7689),m=s(2993),b=(0,v.$j)((function(e){return{profile:e.profile.profile,status:e.profile.status,myID:e.authMe.id,isFetching:e.profile.isFetching,editMode:e.profile.form.editMode,errors:e.profile.form.errors}}),{setProfile:m.RG,saveProfile:m.Ii,setStatus:m.Tf,saveStatus:m.cN,savePhoto:m.Ju,setEditMode:m.Nw.setEditMode,setFormError:m.Nw.setFormError})((function(e){var o=e.profile,s=e.myID,r=e.setProfile,l=e.saveProfile,n=e.status,a=e.setStatus,c=e.saveStatus,u=e.savePhoto,d=e.isFetching,f=e.setEditMode,v=e.editMode,m=e.errors,b=e.setFormError,h=(0,p.UO)().userID,j=Number(h);return j||(j=s),(0,t.useEffect)((function(){j&&(r(j),a(j))}),[j]),(0,t.useEffect)((function(){f(!1),b(null)}),[]),j?d?(0,i.jsx)("div",{className:"text-start p-4",children:"Loading..."}):(0,i.jsx)(x,{profile:o,status:n,savePhoto:u,saveStatus:c,saveProfile:l,editMode:v,setEditMode:f,isOwner:s==j,isFetching:d,setFormError:b,errors:m}):(0,i.jsx)(p.Fg,{to:"/login"})}))},4657:function(e,o,s){e.exports=s.p+"static/media/avatar.5cc100f95b621ce4f01b.jpg"}}]);
//# sourceMappingURL=967.4ca1453f.chunk.js.map